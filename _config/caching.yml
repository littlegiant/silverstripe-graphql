---
Name: graphqlcaching
---
# Enable query recording on dataobjects
SilverStripe\ORM\DataObject:
  extensions:
    QueryRecorderExtension: SilverStripe\GraphQL\Middleware\QueryRecorderExtension

# Add caching middleware to manager
SilverStripe\Core\Injector\Injector:
  Psr\SimpleCache\CacheInterface.graphql:
    factory: SilverStripe\Core\Cache\CacheFactory
    constructor:
      namespace: "graphql"
      defaultLifetime: 600
  SilverStripe\GraphQL\Middleware\CacheMiddleware:
    properties:
      Cache: '%$Psr\SimpleCache\CacheInterface.graphql'
  SilverStripe\GraphQL\Manager:
    properties:
      Middlewares:
        CacheMiddleware: '%$SilverStripe\GraphQL\Middleware\CacheMiddleware'
